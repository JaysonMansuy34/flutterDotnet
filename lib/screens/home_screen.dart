import 'package:flutter/material.dart';
import '../models/annonce.dart';
import '../core/services/favorite_service.dart';
import 'annonce_detail_screen.dart';

class HomeScreen extends StatefulWidget {
  final String userId;  // Assure-toi que userId est bien passé ici comme String

  const HomeScreen({Key? key, required this.userId}) : super(key: key);

  @override
  _HomeScreenState createState() => _HomeScreenState();
}

class _HomeScreenState extends State<HomeScreen> {
  List<Annonce> annonces = [
    Annonce(
      id: 101,
      titre: "Appartement à Paris",
      description: "Un bel appartement au cœur de Paris",
      imageUrl: "data:image/jpeg;base64,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",
    ),
    Annonce(
      id: 102,
      titre: "Maison à Marseille",
      description: "Maison spacieuse avec jardin à Marseille",
      imageUrl: "data:image/jpeg;base64,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",
    ),
  ];

  // Méthode pour ajouter une annonce aux favoris
  Future<void> toggleFavorite(int adId) async {
    List<int> adIds = [adId];  // Liste avec un seul ID pour cet exemple
    bool success = await FavoriteService().toggleFavorite(widget.userId, adIds);

    if (success) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text('Annonce ajoutée aux favoris !'),
        ),
      );
    } else {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text('Erreur lors de l\'ajout aux favoris.'),
        ),
      );
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Liste des Annonces'),
      ),
      body: ListView.builder(
        itemCount: annonces.length,
        itemBuilder: (context, index) {
          final annonce = annonces[index];
          return ListTile(
            leading: Image.network(annonce.imageUrl, width: 50, height: 50, fit: BoxFit.cover),
            title: Text(annonce.titre),
            subtitle: Text(annonce.description),
            trailing: IconButton(
              icon: Icon(
                annonce.isFavoris ? Icons.favorite : Icons.favorite_border,
                color: annonce.isFavoris ? Colors.red : Colors.grey,
              ),
              onPressed: () {
                toggleFavorite(annonce.id);  // Appelle toggleFavorite avec l'ID de l'annonce
              },
            ),
            onTap: () {
              Navigator.push(
                context,
                MaterialPageRoute(
                  builder: (context) => AnnonceDetailScreen(
                    annonce: annonce,
                    userId: widget.userId,
                  ),
                ),
              );
            },
          );
        },
      ),
    );
  }
}
